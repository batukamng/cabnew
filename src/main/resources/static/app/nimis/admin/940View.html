<div id="page_content">
  <div id="page_content_inner p-0">
    <div class="bg-white custom-modal col-span-4">
      <form class="w-full flex flex-col gap-2 relative" name="myFormCreate" id="myFormCreate" novalidate kendo-validator="validatorProject" style="height: calc(100vh - 125px)" custom-scrollbar>
        <div class="relative">
          <div class="help-text border-dashed border-[1px] border-[#FF1010] rounded-md absolute left-3 top-6 w-[13%] p-4 text-sm box-border">
            <h5 class="text-[#FF1010] font-medium">*Тусламж</h5>
            Хэрэглэгчийн эрхийг нэрлэхдээ үндсэн чиг үүрэгтэй нь аль болох холбоотой, нийцэхүйц байхаар бодож бичнэ үү.
          </div>

          <div class="flex flex-col gap-5 mx-[15%] form-container pt-6">
            <div class="grid grid-cols-4 gap-10">
              <div class="col-span-1 text-left">
                <div class="uk-form-row form-field parsley-row">
                  <label class="font-medium mb-2">Эрхийн нэр/MN/</label>
                  <input type="text" class="k-textbox" autofocus required name="rolename" style="width: 100%" data-parsley-trigger="change" ng-model="arr.name" />
                </div>
              </div>
              <div class="col-span-1 text-left">
                <div class="uk-form-row form-field parsley-row">
                  <label class="font-medium mb-2">Эрхийн нэр/EN/</label>
                  <input type="text" class="k-textbox" autofocus required name="rolename" style="width: 100%" ng-model="arr.auth" data-parsley-trigger="change" />
                </div>
              </div>
              <div class="col-span-1 text-left">
                <label class="font-medium mb-2">Төлөв</label>
                <div class="custom-select w-full mt-[1rem]">
                  <div class="item" style="width: 50%" ng-class="arr.useYn == 1 ? 'active' : ''" ng-click="statusChange()">Идэвхтэй</div>
                  <div class="item" style="width: 50%" ng-class="arr.useYn  == 0 ? 'active' : ''" ng-click="statusChange()">Идэвхгүй</div>
                </div>
              </div>
              <div class="col-span-1 text-left relative">
                <label class="font-medium mb-2"> </label>
                <div class="absolute bottom-[8px]">
                  <label class="customCheckbox font-medium"
                    >Бүгд
                    <input type="checkbox" ng-click="selectAll($event)" />
                    <span class="checkmark"></span>
                  </label>
                </div>
              </div>
            </div>
            <div class="mb-10">
              <ul>
                <li ng-repeat="item in allMenus | filter:{parentId: null}" class="border-[#F0F2F5] border-solid border-[2px] rounded-lg mb-4">
                  <div class="flex items-center border-0 border-[#F0F2F5] border-solid py-2" ng-class="{'!border-b-[2px]': item.lutMenus.length > 0 }">
                    <div class="font-semibold">
                      <div class="inline-block ml-2">{{$index + 1}}.</div>
                      {{ item.name }}
                    </div>
                    <div class="ml-auto w-8/12 text-right">
                      <div class="k-form-field-wrap my-2 inline-block">
                        <input type="checkbox" id="{{item.id}}-{{$index}}-allPriv" class="k-checkbox hidden" style="display: none !important" ng-click="selectAllPriv($event.target.checked, item)" />
                        <label class="w-6 bg-white text-[#6C757D] border-[#6C757D] border-[1px] border-solid rounded-2xl py-1 px-3 bg-white text-sm cursor-pointer" for="{{item.id}}-{{$index}}-allPriv"
                          ><i class="material-icons mr-2 text-[#6C757D]">check_outlined</i>Бүгд</label
                        >
                      </div>
                      <div class="k-form-field-wrap my-2 inline-block mr-1" ng-repeat="pri in item.privileges">
                        <input
                          type="checkbox"
                          name="subCapacity"
                          id="{{item.id}}-{{$index}}"
                          ng-value="pri.id"
                          ng-model="privileges[item.id][pri.id]"
                          ng-change="handleCheckAll(privileges[item.id][pri.id], pri.id, item.lutMenus)"
                          class="k-checkbox hidden"
                          style="display: none !important"
                          parse-int
                          ng-true-value="1"
                          ng-false-value="0"
                        />
                        <label class="w-6 bg-white text-[#6C757D] border-[#6C757D] border-[1px] border-solid rounded-2xl py-1 px-3 bg-white text-sm cursor-pointer" for="{{item.id}}-{{$index}}"
                          ><i class="material-icons mr-2 text-[#6C757D]">check_outlined</i>{{translateMon(pri.name)}}</label
                        >
                      </div>
                    </div>
                  </div>
                  <ul ng-if="item.lutMenus.length>0" style="padding: 0">
                    <li ng-repeat="sub1 in item.lutMenus" class="border-0 border-b-[2px] border-[#F0F2F5] border-solid" ng-class="{'!border-0' : item.lutMenus.length-1 == $index }">
                      <div class="flex" ng-class="{ 'flex-col': sub1.lutMenus.length>0, 'flex-row items-center justify-between': sub1.lutMenus.length==0}">
                        <div class="flex items-center justify-between w-full" ng-class="{'border-0 border-b-[2px] border-[#F0F2F5] border-solid': sub1.lutMenus.length > 0 }">
                          <div>
                            <div class="inline-block ml-6">{{$parent.$index + 1}}.{{$index + 1}}.</div>
                            {{ sub1.name }}
                          </div>
                          <div class="ml-2 w-8/12 text-right">
                            <div class="k-form-field-wrap my-2 inline-block mr-1" ng-repeat="pri in sub1.privileges" ng-class="{'border-b-[2px] border-solid border-[#F0F2F5]': sub1.length > 0}">
                              <input
                                type="checkbox"
                                name="subCapacity"
                                id="{{sub1.id}}-{{$index}}"
                                ng-value="pri.id"
                                ng-model="privileges[sub1.id][pri.id]"
                                ng-change="handleCheck(privileges[sub1.id][pri.id], item.id, pri.id)"
                                class="k-checkbox"
                                style="display: none !important"
                                parse-int
                                ng-true-value="1"
                                ng-false-value="0"
                              />
                              <label class="w-6 bg-white text-[#6C757D] border-[#6C757D] border-[1px] border-solid rounded-2xl py-1 px-3 bg-white text-sm cursor-pointer" for="{{sub1.id}}-{{$index}}"
                                ><i class="material-icons mr-2 text-[#6C757D]">check_outlined</i>{{translateMon(pri.name)}}</label
                              >
                            </div>
                          </div>
                        </div>
                        <ul ng-if="sub1.lutMenus.length>0" style="padding: 0">
                          <li ng-repeat="sub2 in sub1.lutMenus" class="border-0 border-b-[2px] border-[#F0F2F5] border-solid" ng-class="{'!border-0' : sub1.lutMenus.length-1 == $index}">
                            <div class="flex items-center justify-between">
                              <div>
                                <div class="inline-block ml-10">{{$parent.$parent.$index + 1}}.{{$parent.$index + 1}}.{{$index + 1}}.</div>
                                {{ sub2.name }}
                              </div>
                              <div class="ml-auto w-8/12 text-right">
                                <div class="k-form-field-wrap my-2 inline-block" ng-repeat="pri in sub2.privileges">
                                  <input
                                    type="checkbox"
                                    name="subCapacity"
                                    id="{{sub2.id}}-{{$index}}"
                                    ng-value="pri.id"
                                    ng-model="privileges[sub2.id][pri.id]"
                                    class="k-checkbox"
                                    style="display: none !important"
                                    parse-int
                                    ng-true-value="1"
                                    ng-false-value="0"
                                  />
                                  <label
                                    class="w-6 bg-white text-[#6C757D] border-[#6C757D] border-[1px] border-solid rounded-2xl py-1 px-3 bg-white text-sm cursor-pointer"
                                    for="{{sub2.id}}-{{$index}}"
                                    ><i class="material-icons mr-2 text-[#6C757D]">check_outlined</i>{{translateMon(pri.name)}}</label
                                  >
                                </div>
                              </div>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </form>
      <div class="flex justify-end border-solid border-[#eef1f4] border-0 border-t-[2px] bg-white w-full px-8 py-4 box-border">
        <button type="button" class="md-btn md-btn-mini uk-modal-close !text-sm cancel-button" style="background: white" ng-click="backToList()">БУЦАХ</button>
        <button type="button" class="md-btn md-btn-mini !text-sm gradient-button px-4" ng-click="submitProject()">ХАДГАЛАХ</button>
      </div>
    </div>
  </div>
</div>

<div class="uk-modal" id="modal_loader">
  <div class="uk-modal-dialog" style="background: none; box-shadow: none; text-align: center; width: 100%">
    <div id="main-loader-contract-list" style="height: 100px"></div>
  </div>
</div>
<script>
  var animation = bodymovin.loadAnimation({
    // animationData: { /* ... */ },
    container: document.getElementById("main-loader-contract-list"), // required
    path: "assets/img/loader.json", // required
    renderer: "svg", // required
    loop: true, // optional
    autoplay: true, // optional
    name: "Demo Animation", // optional
  });
</script>

<style>
  .customSelectedButton {
    padding: 0.25rem !important;
    background-color: #f6f7f8 !important;
    border-color: #eef1f4 !important;
    border-radius: 5px;
    width: 100%;
  }

  .customSelectedButton .customButton:active {
    background-color: white !important;
    border-radius: 5px;
    box-shadow: 0px 4px 8px 4px rgba(0, 0, 0, 0.05);
  }

  .customSelectedButton .customButton span {
    color: grey;
    font-weight: 700;
  }

  .customSelectedButton .customButton:hover {
    border: none !important;
  }

  .customSelectedButton .customButton {
    border-radius: 0 !important;
    background: transparent !important;
    border: none !important;
    font-weight: 400;
    width: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    justify-items: center;
  }

  .customSelectedButton .customButton:focus {
    box-shadow: unset;
  }

  .customSelectedButton .customButton span {
    font-weight: 300;
  }

  .customSelectedButton .customButton .customButton.active {
    background: #fff !important;
    font-weight: 600;
    box-shadow: 0px 4px 8px 4px rgb(0 0 0 / 5%);
  }

  .k-checkbox:checked + label {
    background-color: #312e81 !important;
    border-color: #312e81 !important;
    color: #fff !important;
  }

  .k-checkbox:checked + label i {
    color: #fff !important;
  }
</style>
