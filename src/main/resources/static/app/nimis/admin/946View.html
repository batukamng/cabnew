<div id="page_content">
    <div id="page_content_inner">
        <div class="w-9/10 2xl:w-4/5 mb-16 uk-container-center reset-print">
            <div class="bg-white custom-modal col-span-4" style="border-radius: 5px;">
                <form kendo-validator="validator" id="userForm" ng-submit="formSubmit()" style="padding: 5px;border-radius: 5px;">
                    <ul class="k-edit-form-container" style="display: inline-block; width: 100%;">
                        <li>
                            <div class="grid grid-cols-2 gap-2">
                                <div>
                                    <label for="name" class="uk-form-label uppercase !text-xs font-semibold uk-text-muted">түвшний
                                        нэрийг бичнэ үү</label>
                                    <input type="text" class="k-input k-textbox" required ng-model="dataItem.name" id="name"
                                           style="width: 100%"/>
                                </div>
                                <div>
                                    <label for="name" class="uk-form-label uppercase !text-xs font-semibold uk-text-muted">түвшний тохиргоо</label>
                                    <input
                                            kendo-drop-down-list
                                            k-auto-bind="true"
                                            k-data-text-field="'name'"
                                            k-data-value-field="'id'"
                                            k-data-source="typeDataSource"
                                            k-ng-model="dataItem.level"
                                            k-on-change="configChange()"
                                            ng-model="dataItem.typeId"
                                            required id="typeId"
                                            style="width: 100%"
                                    />
                                </div>
                            </div>
                        </li>
                        <li ng-show="(dataItem.level.controls | filter:{comCd: '03'}:true).length>0">
                            <table class="custom-table">
                                <tbody>
                                <tr class="bg-indigo-50">
                                    <td> <span class="uk-form-label uppercase !text-xs font-semibold uk-text-muted">Бүртгэх мэдээлэл</span></td>
                                    <td class="customHeader" ng-if="(dataItem.level.types | filter:{id: stat.id}:true).length>0"
                                        ng-repeat="stat in otherStatus">{{stat.comCdNm}}</td>
                                </tr>
                                <tr ng-repeat="req in requiredList track by $index">
                                    <td>{{req.comCdNm}}</td>
                                    <td style="width: 40px; text-transform: uppercase; font-size: 11px" ng-if="(dataItem.level.types | filter:{id: stat.id}:true).length>0" ng-repeat="stat in otherStatus">
                                        <label class="customCheckbox" for="{{req.id}}-{{stat.id}}">
                                            <input type="checkbox" id="{{req.id}}-{{stat.id}}" ng-value="stat.id"
                                                   ng-model="reqObj[stat.id][req.id]"/>
                                            <span class="checkmark"></span>
                                        </label>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </li>
                        <li ng-show="(dataItem.level.controls | filter:{comCd: '02'}:true).length>0">
                            <table class="custom-table">
                                <thead>
                                <tr class="bg-indigo-50">
                                    <td>
                                        <span class="uk-form-label uppercase !text-xs font-semibold uk-text-muted">Удирдах түвшингүүд</span>
                                    </td>
                                    <td class="customHeader" ng-if="(dataItem.level.types | filter:{id: stat.id}:true).length>0" ng-repeat="stat in otherStatus">{{stat.comCdNm}}</td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-if="levelDataSource.length>0 && (dataItem.level.levels | filter:{id: lvl.id}:true).length>0" ng-repeat="lvl in levelDataSource track by $index">
                                    <td>{{lvl.name}}</td>
                                    <td style="width: 40px" ng-if="(dataItem.level.types | filter:{id: stat.id}:true).length>0" ng-repeat="stat in otherStatus">
                                        <label class="customCheckbox">
                                            <input type="checkbox" id="{{lvl.id}}-{{$index}}" ng-value="stat.id"
                                                   ng-model="lvlObj[stat.id][lvl.id]"/>
                                            <span class="checkmark"></span>
                                        </label>
                                    </td>
                                </tr>
                                <tr ng-if="levelDataSource!=null && levelDataSource.length==0">
                                    <td class="uk-text-center">
                                        Түвшин бүртгээгүй байна
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </li>
                        <li ng-show="(dataItem.level.controls | filter:{comCd: '01'}:true).length>0">
                            <table class="custom-table">
                                <thead>
                                <tr class="bg-indigo-50">
                                    <td>
                                        <span class="uk-form-label uppercase !text-xs font-semibold uk-text-muted">харгалзах эрхүүдийг сонгоно уу</span>
                                    </td>
                                    <td class="customHeader" ng-if="(dataItem.level.types | filter:{id: stat.id}:true).length>0" ng-repeat="stat in otherStatus">{{stat.comCdNm}}</td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-if="(dataItem.level.roles | filter:{id: role.id}:true).length>0" ng-repeat="role in roles track by $index">
                                    <td>{{role.name}}</td>
                                    <td style="width: 40px" ng-if="(dataItem.level.types | filter:{id: stat.id}:true).length>0" ng-repeat="stat in otherStatus">
                                        <label class="customCheckbox">
                                            <input type="checkbox" id="{{stat.id}}-{{$index}}" ng-value="stat.id"
                                                   ng-model="roleObj[stat.id][role.id]"/>
                                            <span class="checkmark"></span>
                                        </label>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </li>
                        <li style="margin-bottom: 0px;">
                            <label class="uk-form-label uppercase !text-xs font-semibold uk-text-muted">төлөв</label>
                            <div class="custom-select">
                                <div class="item w-1/2" ng-class="{'active' : dataItem.useYn}"
                                     ng-click="dataItem.useYn=1">
                                    Идэвхтэй
                                </div>
                                <div class="item w-1/2" ng-class="{'active' : !dataItem.useYn}"
                                     ng-click="dataItem.useYn=0">
                                    Идэвхгүй
                                </div>
                            </div>
                        </li>
                    </ul>
                </form>
            </div>
        </div>

        <div class="mt-6 fixed flex gap-2 w-screen !items-center justify-end !px-12 py-4 bottom-0 box-border bg-white w-screen left-0 border-solid border-0 border-t-[2px] border-zinc-200"
             style="z-index: 100; box-shadow: 0 5px 10px -2px rgb(86 61 124 / 13%)">
            <button type="button" class="md-btn md-btn-mini uk-modal-close !text-sm cancel-button"
                    style="background: white" back-button>БУЦАХ
            </button>
            <button type="button" class="md-btn md-btn-mini !text-sm gradient-button px-4" ng-click="formSubmit()">
                ХАДГАЛАХ
            </button>
        </div>
    </div>
</div>

<div class="uk-modal" id="modal_loader">
    <div class="uk-modal-dialog" style="background: none; box-shadow: none; text-align: center; width: 100%">
        <div id="main-loader-contract-list" style="height: 100px"></div>
    </div>
</div>
<script>
    var animation = bodymovin.loadAnimation({
        // animationData: { /* ... */ },
        container: document.getElementById("main-loader-contract-list"), // required
        path: "assets/img/loader.json", // required
        renderer: "svg", // required
        loop: true, // optional
        autoplay: true, // optional
        name: "Demo Animation", // optional
    });
</script>

<style>
    .k-edit-field {
        width: 75%;
    }

    .k-edit-label {
        width: 20%;
    }

    .customSelectedButton {
        padding: 0.25rem !important;
        background-color: #f6f7f8 !important;
        border-color: #eef1f4 !important;
        border-radius: 5px;
        width: 100%;
    }

    .customSelectedButton .customButton:active {
        background-color: white !important;
        border-radius: 5px;
        box-shadow: 0px 4px 8px 4px rgba(0, 0, 0, 0.05);
    }

    .customSelectedButton .customButton span {
        color: grey;
        font-weight: 700;
    }

    .customSelectedButton .customButton:hover {
        border: none !important;
    }

    .customSelectedButton .customButton {
        border-radius: 0 !important;
        background: transparent !important;
        border: none !important;
        font-weight: 400;
        width: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        justify-items: center;
    }

    .customSelectedButton .customButton:focus {
        box-shadow: unset;
    }

    .customSelectedButton .customButton span {
        font-weight: 300;
    }

    .customSelectedButton .customButton .customButton.active {
        background: #fff !important;
        font-weight: 600;
        box-shadow: 0px 4px 8px 4px rgb(0 0 0 / 5%);
    }

    .k-checkbox:checked + label {
        background-color: #312e81 !important;
        border-color: #312e81 !important;
        color: #fff !important;
    }

    .k-checkbox:checked + label i {
        color: #fff !important;
    }

    .customCheckbox .checkmark {
        left: 50%;
        transform: translate(-50%, -50%);
        top: 50%;
    }

    ul.k-edit-form-container li {
        margin-bottom: 20px;
    }

    .custom-table td.customHeader {
        width: 40px !important;
        text-transform: uppercase;
        font-size: 11px;
        text-align: center;
        font-weight: 500;
    }

    .custom-table tr,
    .custom-table tr td {
        border-radius: 0 !important;
    }

    .custom-table tr:hover {
        background-color: #eef1f4 !important;
    }
</style>
