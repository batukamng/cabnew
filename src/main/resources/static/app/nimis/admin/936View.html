<div id="page_content">
  <div id="page_content_inner">
    <div class="uk-grid" data-uk-grid-margin>
      <div class="uk-width-medium-1-1 iconBtn">
        <kendo-grid options="mainGrid" id="parent" class="uk-text-small" k-data-source="dataSource">
          <div k-detail-template>
            <div id="detGrid" class="uk-text-small" kendo-grid k-options="detailGridOptions(dataItem)"></div>
          </div>
        </kendo-grid>
      </div>
    </div>
  </div>
</div>

<div class="uk-modal" id="modal_form">
  <div class="uk-modal-dialog custom-modal" style="margin-bottom: 0; padding: 0; width: 700px">
    <div class="formHeader" style="display: block; margin: 0 -24px; padding: 24px">
      <div class="uk-grid">
        <div class="uk-width-medium-1-1 uk-text-left">
          <h3 class="customTitle" style="margin-bottom: 0; padding-top: 5px; padding-bottom: 5px">
            <span>Цэс бүртгэх</span>
            <button type="button" class="uk-modal-close uk-float-right uk-close"></button>
          </h3>
        </div>
      </div>
    </div>
    <form class="k-form k-form-vertical" id="validator" custom-scrollbar style="margin-bottom: 0; overflow-x: hidden; height: calc(100vh - 200px)" ng-submit="formSubmit()">
      <div style="padding: 0">
        <div class="uk-overflow-container">
          <ul class="k-edit-form-container" style="display: inline-block; width: 100%">
            <li>
              <div class="k-edit-label"><label>Төрөл</label></div>
              <div class="k-edit-field flex" style="margin-top: 5px">
                <label class="customRadioBtn" style="width: 100px"
                  >Үндсэн цэс
                  <input type="radio" ng-model="dataItem.main" ng-value="1" />
                  <span class="checkmark"></span>
                </label>
                <label class="customRadioBtn"
                  >Дэд цэс
                  <input type="radio" ng-model="dataItem.main" ng-change="tabChange(dataItem.pageType)" ng-value="0" />
                  <span class="checkmark"></span>
                </label>
              </div>
            </li>
            <li ng-if="dataItem.main == 1">
              <div class="k-edit-label"><label>Байрлал</label></div>
              <div class="k-edit-field flex" style="margin-top: 5px">
                <label class="customRadioBtn" style="width: 100px"
                  >Хажуу цэс
                  <input type="radio" ng-model="dataItem.pageType" ng-value="1" />
                  <span class="checkmark"></span>
                </label>
                <label class="customRadioBtn"
                  >ТАБ-тай
                  <input type="radio" ng-model="dataItem.pageType" ng-value="0" />
                  <span class="checkmark"></span>
                </label>
              </div>
            </li>

            <li ng-show="!dataItem.main">
              <div class="k-edit-label"><label>Үндсэн цэс</label></div>
              <div class="k-edit-field">
                <input
                  kendo-drop-down-list
                  k-auto-bind="true"
                  k-data-text-field="'name'"
                  k-data-value-field="'id'"
                  k-filter="'startswith'"
                  k-data-source="ddlDataSource"
                  ng-model="dataItem.parentId"
                  k-on-change="parentChange(e)"
                  ng-required="!dataItem.main"
                  id="mstCd"
                  style="width: 100%"
                />
              </div>
            </li>
            <li>
              <div class="k-edit-label"><label for="name">Нэр</label></div>
              <div class="k-edit-field">
                <input type="text" class="k-input k-textbox" required ng-model="dataItem.name" id="name" style="width: 100%" />
              </div>
            </li>
            <li>
              <div class="k-edit-label"><label for="url">Хаяг /URL/ </label></div>
              <div class="k-edit-field">
                <input type="text" class="k-input k-textbox" ng-model="dataItem.url" id="url" style="width: 100%" />
              </div>
            </li>
            <li>
              <div class="k-edit-label"><label for="orderId">Эрэмбэ</label></div>
              <div class="k-edit-field">
                <input kendo-numeric-text-box id="orderId" k-min="0" k-max="100" k-ng-model="dataItem.orderId" style="width: 100%" />
              </div>
            </li>
            <li>
              <div class="k-edit-label"><label>Айкон</label></div>
              <div class="k-edit-field flex gap-2 flex-wrap">
                <div ng-repeat="icon in iconDataSource" class="menu_icon uk-flex" style="flex-direction: column">
                  <div
                    class="custom-icon"
                    ng-class="{'active': icon.icon.uri == dataItem.icon}"
                    style="background-color: #2563eb;-webkit-mask:url({{icon.icon.uri}});mask:url({{icon.icon.uri}}); "
                    for="{{icon.id}}-{{$index}}"
                    ng-click="dataItem.icon = icon.icon.uri"
                  ></div>
                </div>
              </div>
            </li>

            <li>
              <div class="k-edit-label"><label>Үйлдэл</label></div>
              <div class="k-edit-field">
                <div class="m-2 ml-0 inline-block" ng-repeat="pri in itemActionDataSource">
                  <input
                    type="checkbox"
                    name="subCapacity"
                    id="{{item.id}}-{{$index}}"
                    ng-value="pri.id"
                    ng-model="privileges[pri.id]"
                    class="k-checkbox hidden"
                    style="display: none !important"
                    parse-int
                    ng-true-value="1"
                    ng-false-value="0"
                  />
                  <label class="w-6 bg-white text-[#6C757D] border-[#6C757D] border-[1px] border-solid rounded-2xl py-1 px-3 bg-white text-sm cursor-pointer" for="{{item.id}}-{{$index}}"
                    ><i class="material-icons mr-2 text-[#6C757D]">check_outlined</i>{{pri.name}}</label
                  >
                </div>
                <!-- <select kendo-multi-select k-options="selectOptions" id="products" k-ng-model="dataItem.privilegeArr"></select> -->
              </div>
            </li>
            <!--        <li>
                      <div class="k-edit-label"><label for="all">Бүгдэд хамаарах</label></div>
                      <div class="k-edit-field" style="margin-top: 5px">
                        <input class="switchery switchery-small" type="checkbox" id="all" ui-switch ng-model="dataItem.allModule" parse-int ng-true-value="1" ng-false-value="0" />
                        <label for="all" class="inline-label" ng-bind="dataItem.allModule?'Тийм':'Үгүй'">Label</label>
                      </div>
                    </li>-->
            <!--ng-show="dataItem.allModule == 0"-->
            <li >
              <div class="k-edit-label"><label>Дэд систем</label></div>
              <div class="k-edit-field">
                <ul>
                  <li>
                    <label class="customRadioBtn"
                      >Бүгд
                      <input type="radio" ng-model="isCheckAll" ng-value="'all'" ng-click="checkAll($event)" />
                      <span class="checkmark"></span>
                    </label>
                  </li>
                  <li ng-repeat="item in itemModuleDataSource">
                    <label class="customCheckbox"
                      >{{item.name}}
                      <input type="checkbox" ng-model="modules[item.id]" ng-change="changeCheckbox()" parse-int ng-true-value="1" ng-false-value="0" />
                      <span class="checkmark"></span>
                    </label>
                  </li>
                </ul>
              </div>
            </li>

            <li>
              <div class="k-edit-label"><label for="url">Гарын авлага </label></div>
              <div class="k-edit-field">
                <input name="file" accept="image/*,application/pdf" type="file" id="staff" k-options="fileOptions" kendo-upload k-select="onSelect" />
              </div>
            </li>

            <li>
              <div class="k-edit-label"><label for="url">Видео /URL/ </label></div>
              <div class="k-edit-field">
                <input type="text" class="k-input k-textbox" ng-model="dataItem.videoUrl" id="videoUrl" style="width: 100%" />
              </div>
            </li>

            <li>
              <div class="k-edit-label"><label for="useYn">Ашиглах эсэх</label></div>
              <div class="k-edit-field" style="margin-top: 5px">
                <input class="switchery switchery-small" type="checkbox" id="useYn" ui-switch ng-model="dataItem.useYn" parse-int ng-true-value="1" ng-false-value="0" />
                <label for="useYn" class="inline-label" ng-bind="dataItem.useYn?'Идэвхтэй':'Идэвхгүй'">Label</label>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </form>
    <div class="formFooter" style="margin: 0; padding: 12px">
      <div class="uk-grid">
        <div class="uk-width-1-1 uk-text-right">
          <button type="button" class="md-btn md-btn-mini uk-modal-close !text-sm cancel-button">БУЦАХ</button>
          <button type="button" ng-click="formSubmit()" class="md-btn md-btn-mini !text-sm gradient-button px-4">ХАДГАЛАХ</button>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .k-checkbox:checked + label {
    background-color: #312e81 !important;
    border-color: #312e81 !important;
    color: #fff !important;
  }

  .k-checkbox:checked + label i {
    color: #fff !important;
  }

  .k-edit-field {
    overflow: hidden;
  }

  .custom-icon {
    height: 25px;
    width: 25px;
    cursor: pointer;
    background-color: #2563eb;
  }

  .custom-icon:hover,
  .custom-icon.active {
    background-color: #f3c30e !important;
  }
</style>
